<ui:composition template="templateVisita.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="title">
        INGRESO
    </ui:define>

    <ui:define name="content">
        <center>
            <h1>Ingresa Usuario registrado</h1>

            <h:form id="form">

                <p:growl id="msgs" sticky="true" showDetail="true" life="3000" />
                <p:fieldset id="Registrar" legend="Ingresa aquí con tus datos" 
                            style="margin-top: 40px; width: 500px;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="E-Mail" /> 
                        <p:inputText id="email" value="#{usuarioBean.ingresoEmail}" 
                                     placeholder="Ingresa tu Email aquí" 
                                     required="true" label="email" size="35" />

                        <h:outputText value="Clave" /> 
                        <p:password id="password" value="#{usuarioBean.ingresoClave}" 
                                    required="true" label="password" 
                                    placeholder="Ingresa tu contraseña" size="35"/>


                    </h:panelGrid>
                    <p:commandButton value="Login" update="msgs" 
                                     actionListener="#{usuarioBean.login(event)}"
                                     oncomplete="handleLoginRequest(xhr, status, args)"/>
                </p:fieldset>
            </h:form> 
        </center>
        <script type="text/javascript">
            function handleLoginRequest(xhr, status, args)
            {
                if (!args.validationFailed || args.loggedIn)
                {
                    setTimeout(function () {
                        window.location = args.view;
                    }, 1500);
                }
            }
        </script>
    </ui:define>
</ui:composition>

